{"ast":null,"code":"import React,{useEffect}from\"react\";import{Button,Row,Col,ListGroup,Image,Card}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import Checkoutsteps from\"../Checkoutsteps\";import Message from'../Message';import{createOrder}from\"../../actions/orderActions\";import{ORDER_CREATE_RESET}from\"../../constants/orderConstants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PlaceOrderScreen=function PlaceOrderScreen(_ref){var history=_ref.history;var orderCreate=useSelector(function(state){return state.orderCreate;});var order=orderCreate.order,error=orderCreate.error,success=orderCreate.success;var dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});cart.shippingPrice=(cart.itemsPrice>100?0:10).toFixed(2);cart.taxPrice=Number(0.082*cart.itemsPrice).toFixed(2);cart.totalPrice=(Number(cart.itemsPrice)+Number(cart.shippingPrice)+Number(cart.taxPrice)).toFixed(2);cart.itemsPrice=cart.cartItems.reduce(function(acc,item){return acc+item.price*item.qty;},0).toFixed(2);if(!cart.paymentMethod){history.push('/payment');}useEffect(function(){if(success){history.push(\"/order/\".concat(order._id));dispatch({type:ORDER_CREATE_RESET});}},[dispatch,success,history]);var placeOrder=function placeOrder(e){e.preventDefault();dispatch(createOrder({orderItems:cart.cartItems,shippingAddress:cart.shippingAddress,paymentMethod:cart.paymentMethod,itemsPrice:cart.itemsPrice,shippingPrice:cart.shippingPrice,taxPrice:cart.taxPrice,totalPrice:cart.totalPrice}));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Checkoutsteps,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:8,children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"shipping\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Shipping:\"}),cart.shippingAddress.address,\",\",cart.shippingAddress.city,'  ',cart.shippingAddress.postalCode,\",\",' ',cart.shippingAddress.country]})]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"payment Method\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Method:\"}),cart.paymentMethod]})]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Order Items\"}),cart.cartItems.length===0?/*#__PURE__*/_jsx(Message,{variant:\"info\",children:\"Your cart is empty\"}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cart.cartItems.map(function(item,index){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:1,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:4,children:[item.qty,\" X $\",item.price,\" = $\",(item.qty*item.price).toFixed(2)]})]})},index);})})]})]})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"h2\",{children:\"order summary\"})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Item:\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",cart.itemsPrice]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Shipping:\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",cart.shippingPrice]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Tax:\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",cart.taxPrice]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Total:\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",cart.totalPrice]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-block\",disabled:cart.cartItems===0,onClick:placeOrder,children:\"PLace Order\"})})]})})})]})]});};export default PlaceOrderScreen;","map":{"version":3,"sources":["/home/robin/Desktop/robin/econ/shopbackend/src/components/Screens/PlaceOrderScreen.js"],"names":["React","useEffect","Button","Row","Col","ListGroup","Image","Card","useDispatch","useSelector","Link","Checkoutsteps","Message","createOrder","ORDER_CREATE_RESET","PlaceOrderScreen","history","orderCreate","state","order","error","success","dispatch","cart","shippingPrice","itemsPrice","toFixed","taxPrice","Number","totalPrice","cartItems","reduce","acc","item","price","qty","paymentMethod","push","_id","type","placeOrder","e","preventDefault","orderItems","shippingAddress","address","city","postalCode","country","length","map","index","image","name","product"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAAQC,MAAR,CAAeC,GAAf,CAAmBC,GAAnB,CAAuBC,SAAvB,CAAiCC,KAAjC,CAAuCC,IAAvC,KAAkD,iBAAlD,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,aAAP,KAA0B,kBAA1B,CACA,MAAOC,CAAAA,OAAP,KAAqB,YAArB,CACA,OAASC,WAAT,KAA4B,4BAA5B,CACA,OAASC,kBAAT,KAAmC,gCAAnC,C,wFAEA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,MAAe,IAAbC,CAAAA,OAAa,MAAbA,OAAa,CAEpC,GAAMC,CAAAA,WAAW,CAAGR,WAAW,CAAC,SAAAS,KAAK,QAAIA,CAAAA,KAAK,CAACD,WAAV,EAAN,CAA/B,CAFoC,GAI7BE,CAAAA,KAJ6B,CAIPF,WAJO,CAI7BE,KAJ6B,CAIvBC,KAJuB,CAIPH,WAJO,CAIvBG,KAJuB,CAIjBC,OAJiB,CAIPJ,WAJO,CAIjBI,OAJiB,CAMpC,GAAMC,CAAAA,QAAQ,CAAGd,WAAW,EAA5B,CAGA,GAAMe,CAAAA,IAAI,CAAGd,WAAW,CAAC,SAAAS,KAAK,QAAEA,CAAAA,KAAK,CAACK,IAAR,EAAN,CAAxB,CACAA,IAAI,CAACC,aAAL,CAAqB,CAACD,IAAI,CAACE,UAAL,CAAkB,GAAlB,CAAwB,CAAxB,CAA4B,EAA7B,EAAiCC,OAAjC,CAAyC,CAAzC,CAArB,CAEAH,IAAI,CAACI,QAAL,CAAcC,MAAM,CAAE,KAAD,CAAUL,IAAI,CAACE,UAAhB,CAAN,CAAkCC,OAAlC,CAA0C,CAA1C,CAAd,CAEAH,IAAI,CAACM,UAAL,CAAkB,CAACD,MAAM,CAACL,IAAI,CAACE,UAAN,CAAN,CAA0BG,MAAM,CAACL,IAAI,CAACC,aAAN,CAAhC,CAAsDI,MAAM,CAACL,IAAI,CAACI,QAAN,CAA7D,EAA8ED,OAA9E,CAAsF,CAAtF,CAAlB,CACAH,IAAI,CAACE,UAAL,CAAkBF,IAAI,CAACO,SAAL,CAAeC,MAAf,CAAsB,SAACC,GAAD,CAAKC,IAAL,QAAaD,CAAAA,GAAG,CAAGC,IAAI,CAACC,KAAL,CAAaD,IAAI,CAACE,GAArC,EAAtB,CAA+D,CAA/D,EAAkET,OAAlE,CAA0E,CAA1E,CAAlB,CAEA,GAAG,CAACH,IAAI,CAACa,aAAT,CAAuB,CACnBpB,OAAO,CAACqB,IAAR,CAAa,UAAb,EACH,CAEDpC,SAAS,CAAC,UAAM,CACd,GAAGoB,OAAH,CAAW,CACTL,OAAO,CAACqB,IAAR,kBAAuBlB,KAAK,CAACmB,GAA7B,GACAhB,QAAQ,CAAC,CAACiB,IAAI,CAACzB,kBAAN,CAAD,CAAR,CACD,CACF,CALQ,CAKN,CAACQ,QAAD,CAAUD,OAAV,CAAkBL,OAAlB,CALM,CAAT,CAOA,GAAMwB,CAAAA,UAAU,CAAE,QAAZA,CAAAA,UAAY,CAACC,CAAD,CAAK,CACrBA,CAAC,CAACC,cAAF,GACApB,QAAQ,CAACT,WAAW,CAAC,CACjB8B,UAAU,CAACpB,IAAI,CAACO,SADC,CAEjBc,eAAe,CAACrB,IAAI,CAACqB,eAFJ,CAGjBR,aAAa,CAACb,IAAI,CAACa,aAHF,CAIjBX,UAAU,CAACF,IAAI,CAACE,UAJC,CAKjBD,aAAa,CAACD,IAAI,CAACC,aALF,CAMjBG,QAAQ,CAACJ,IAAI,CAACI,QANG,CAOjBE,UAAU,CAACN,IAAI,CAACM,UAPC,CAAD,CAAZ,CAAR,CAYD,CAdD,CAeA,mBACI,oCACI,KAAC,aAAD,EAAe,KAAK,KAApB,CAAqB,KAAK,KAA1B,CAA2B,KAAK,KAAhC,CAAiC,KAAK,KAAtC,EADJ,cAEI,MAAC,GAAD,yBACI,KAAC,GAAD,EAAK,EAAE,CAAE,CAAT,uBACI,MAAC,SAAD,EAAW,OAAO,CAAC,OAAnB,wBACI,MAAC,SAAD,CAAW,IAAX,yBACI,gCADJ,cAEI,kCACI,qCADJ,CAEKN,IAAI,CAACqB,eAAL,CAAqBC,OAF1B,KAEoCtB,IAAI,CAACqB,eAAL,CAAqBE,IAFzD,CAGK,IAHL,CAIKvB,IAAI,CAACqB,eAAL,CAAqBG,UAJ1B,KAKK,GALL,CAMKxB,IAAI,CAACqB,eAAL,CAAqBI,OAN1B,GAFJ,GADJ,cAgBI,MAAC,SAAD,CAAW,IAAX,yBACI,sCADJ,cAEI,kCACI,mCADJ,CAEKzB,IAAI,CAACa,aAFV,GAFJ,GAhBJ,cAyBI,MAAC,SAAD,CAAW,IAAX,yBACI,mCADJ,CAEIb,IAAI,CAACO,SAAL,CAAemB,MAAf,GAA0B,CAA1B,cAA8B,KAAC,OAAD,EAAS,OAAO,CAAC,MAAjB,gCAA9B,cAIG,KAAC,SAAD,EAAW,OAAO,CAAC,OAAnB,UACI1B,IAAI,CAACO,SAAL,CAAeoB,GAAf,CAAmB,SAACjB,IAAD,CAAMkB,KAAN,qBAChB,KAAC,SAAD,CAAW,IAAX,wBACI,MAAC,GAAD,yBACI,KAAC,GAAD,EAAK,EAAE,CAAE,CAAT,uBACG,KAAC,KAAD,EAAO,GAAG,CAAElB,IAAI,CAACmB,KAAjB,CAAwB,GAAG,CAAEnB,IAAI,CAACoB,IAAlC,CAAwC,KAAK,KAA7C,CAA8C,OAAO,KAArD,EADH,EADJ,cAKI,KAAC,GAAD,wBACC,KAAC,IAAD,EAAM,EAAE,oBAAcpB,IAAI,CAACqB,OAAnB,CAAR,UAAuCrB,IAAI,CAACoB,IAA5C,EADD,EALJ,cAQI,MAAC,GAAD,EAAK,EAAE,CAAE,CAAT,WACMpB,IAAI,CAACE,GADX,QACoBF,IAAI,CAACC,KADzB,QACoC,CAACD,IAAI,CAACE,GAAL,CAAWF,IAAI,CAACC,KAAjB,EAAwBR,OAAxB,CAAgC,CAAhC,CADpC,GARJ,GADJ,EAAqByB,KAArB,CADgB,EAAnB,CADJ,EANP,GAzBJ,GADJ,EADJ,cAwDI,KAAC,GAAD,EAAK,EAAE,CAAE,CAAT,uBACA,KAAC,IAAD,wBACI,MAAC,SAAD,EAAW,OAAO,CAAC,OAAnB,wBACQ,KAAC,SAAD,CAAW,IAAX,wBACK,qCADL,EADR,cAKQ,KAAC,SAAD,CAAW,IAAX,wBACK,MAAC,GAAD,yBACI,KAAC,GAAD,oBADJ,cAII,MAAC,GAAD,gBAAO5B,IAAI,CAACE,UAAZ,GAJJ,GADL,EALR,cAcQ,KAAC,SAAD,CAAW,IAAX,wBACK,MAAC,GAAD,yBACI,KAAC,GAAD,wBADJ,cAII,MAAC,GAAD,gBAAOF,IAAI,CAACC,aAAZ,GAJJ,GADL,EAdR,cAwBQ,KAAC,SAAD,CAAW,IAAX,wBACK,MAAC,GAAD,yBACI,KAAC,GAAD,mBADJ,cAII,MAAC,GAAD,gBAAOD,IAAI,CAACI,QAAZ,GAJJ,GADL,EAxBR,cAkCQ,KAAC,SAAD,CAAW,IAAX,wBACK,MAAC,GAAD,yBACI,KAAC,GAAD,qBADJ,cAII,MAAC,GAAD,gBAAOJ,IAAI,CAACM,UAAZ,GAJJ,GADL,EAlCR,cA2CS,KAAC,SAAD,CAAW,IAAX,WACKT,KAAK,eAAI,KAAC,OAAD,EAAS,OAAO,CAAC,QAAjB,UAA2BA,KAA3B,EADd,EA3CT,cA+CQ,KAAC,SAAD,CAAW,IAAX,wBACG,KAAC,MAAD,EACC,IAAI,CAAC,QADN,CAEC,SAAS,CAAC,WAFX,CAGC,QAAQ,CAAEG,IAAI,CAACO,SAAL,GAAiB,CAH5B,CAIC,OAAO,CAAEU,UAJV,yBADH,EA/CR,GADJ,EADA,EAxDJ,GAFJ,GADJ,CA4HH,CAvKD,CAyKA,cAAezB,CAAAA,gBAAf","sourcesContent":["import React, { useEffect } from \"react\"\nimport {Button,Row,Col,ListGroup,Image,Card} from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport Checkoutsteps from \"../Checkoutsteps\";\nimport Message  from '../Message';\nimport { createOrder } from \"../../actions/orderActions\";\nimport { ORDER_CREATE_RESET } from \"../../constants/orderConstants\";\n\nconst PlaceOrderScreen = ({history}) => {\n\n    const orderCreate = useSelector(state => state.orderCreate)\n\n    const {order,error,success} =orderCreate \n\n    const dispatch = useDispatch()\n\n\n    const cart = useSelector(state=>state.cart)\n    cart.shippingPrice = (cart.itemsPrice > 100 ? 0 : 10).toFixed(2)\n    \n    cart.taxPrice=Number((0.082) * cart.itemsPrice).toFixed(2)\n\n    cart.totalPrice = (Number(cart.itemsPrice) + Number(cart.shippingPrice) +Number(cart.taxPrice)).toFixed(2)\n    cart.itemsPrice = cart.cartItems.reduce((acc,item)=> acc + item.price * item.qty,0).toFixed(2)\n    \n    if(!cart.paymentMethod){\n        history.push('/payment')\n    }\n\n    useEffect(() => {\n      if(success){\n        history.push(`/order/${order._id}`)\n        dispatch({type:ORDER_CREATE_RESET})\n      }\n    }, [dispatch,success,history])\n\n    const placeOrder =(e)=>{\n      e.preventDefault()\n      dispatch(createOrder({\n          orderItems:cart.cartItems,\n          shippingAddress:cart.shippingAddress,\n          paymentMethod:cart.paymentMethod,\n          itemsPrice:cart.itemsPrice,\n          shippingPrice:cart.shippingPrice,\n          taxPrice:cart.taxPrice,\n          totalPrice:cart.totalPrice,\n\n\n      }))\n\n    }\n    return (\n        <div>\n            <Checkoutsteps step1 step2 step3 step4/>\n            <Row>\n                <Col md={8}>\n                    <ListGroup variant='flush'>\n                        <ListGroup.Item>\n                            <h2>shipping</h2>\n                            <p>\n                                <strong>Shipping:</strong>\n                                {cart.shippingAddress.address},{cart.shippingAddress.city}\n                                {'  '}\n                                {cart.shippingAddress.postalCode},\n                                {' '}\n                                {cart.shippingAddress.country}\n                            </p>\n                        </ListGroup.Item>\n\n\n\n\n                        <ListGroup.Item>\n                            <h2>payment Method</h2>\n                            <p>\n                                <strong>Method:</strong>\n                                {cart.paymentMethod}\n                            </p>\n                        </ListGroup.Item>\n\n\n                        <ListGroup.Item>\n                            <h2>Order Items</h2>\n                           {cart.cartItems.length === 0 ? <Message variant='info'>\n\n                             Your cart is empty\n                           </Message>:(\n                               <ListGroup variant='flush'>\n                                  {cart.cartItems.map((item,index)=>(\n                                      <ListGroup.Item key={index}>\n                                          <Row>\n                                              <Col md={1}>\n                                                 <Image src={item.image} alt={item.name} fluid rounded/>\n                                              </Col>\n\n                                              <Col>\n                                               <Link to={`/product/${item.product}`}>{item.name}</Link>\n                                              </Col>\n                                              <Col md={4}>\n                                                   {item.qty} X ${item.price} = ${(item.qty * item.price).toFixed(2)}\n                                              </Col>\n                                          </Row>\n                                      </ListGroup.Item>\n                                  ))}\n                               </ListGroup>\n                           )}\n                        </ListGroup.Item> \n\n                    </ListGroup>\n                </Col>\n                <Col md={4}>\n                <Card>\n                    <ListGroup variant='flush'>\n                            <ListGroup.Item>\n                                 <h2>order summary</h2>\n                            </ListGroup.Item>\n\n                            <ListGroup.Item>\n                                 <Row>\n                                     <Col>\n                                     Item:\n                                     </Col>\n                                     <Col>${cart.itemsPrice}</Col>\n                                 </Row>\n                            </ListGroup.Item>\n\n                            <ListGroup.Item>\n                                 <Row>\n                                     <Col>\n                                     Shipping:\n                                     </Col>\n                                     <Col>${cart.shippingPrice}</Col>\n                                 </Row>\n                            </ListGroup.Item>\n\n\n                            <ListGroup.Item>\n                                 <Row>\n                                     <Col>\n                                     Tax:\n                                     </Col>\n                                     <Col>${cart.taxPrice}</Col>\n                                 </Row>\n                            </ListGroup.Item>\n\n\n                            <ListGroup.Item>\n                                 <Row>\n                                     <Col>\n                                     Total:\n                                     </Col>\n                                     <Col>${cart.totalPrice}</Col>\n                                 </Row>\n                            </ListGroup.Item>\n\n                             <ListGroup.Item>\n                                { error && <Message variant='danger'>{error}</Message>} \n                             </ListGroup.Item>\n\n                            <ListGroup.Item>\n                               <Button\n                                type='button'\n                                className='btn-block'\n                                disabled={cart.cartItems===0}\n                                onClick={placeOrder}\n                               >\n                                   PLace Order\n                               </Button>\n                            </ListGroup.Item>\n                    </ListGroup>\n                </Card>\n                </Col>\n            </Row>\n        </div>\n    )\n}\n\nexport default PlaceOrderScreen\n"]},"metadata":{},"sourceType":"module"}