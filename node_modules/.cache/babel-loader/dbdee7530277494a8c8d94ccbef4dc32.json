{"ast":null,"code":"import React,{useEffect}from\"react\";import{LinkContainer}from\"react-router-bootstrap\";import{Table,Button}from\"react-bootstrap\";import{Loader}from\"../Loader\";import Message from\"../Message\";import{useDispatch,useSelector}from\"react-redux\";import{listUsers,deleteUser}from\"../../actions/userActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserListScreen=function UserListScreen(_ref){var history=_ref.history;var dispatch=useDispatch();var userList=useSelector(function(state){return state.userList;});var loading=userList.loading,error=userList.error,users=userList.users;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var userDelete=useSelector(function(state){return state.userDelete;});var successDelete=userDelete.success;useEffect(function(){if(userInfo&&userInfo.isAdmin){dispatch(listUsers());}else{history.push('/login');}},[dispatch,history,successDelete,userInfo]);var deleteHandler=function deleteHandler(id){if(window.confirm('Are you sure you want to delete this user')){dispatch(deleteUser(id));}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"users\"}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Table,{stripped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"EMAIL\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ADMIN\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(function(user){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user._id}),/*#__PURE__*/_jsx(\"td\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:user.isAdmin?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check\",style:{color:'green'}}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check\",style:{color:'red'}})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin/user/\".concat(user._id,\"/edit\"),children:/*#__PURE__*/_jsxs(Button,{variant:\"light\",className:\"btn-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"}),\"Edit\"]})}),/*#__PURE__*/_jsxs(Button,{variant:\"danger\",className:\"btn-sm\",onClick:function onClick(){return deleteHandler(user._id);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"}),\"Delete\"]})]})]},user._id);})})]})]});};export default UserListScreen;","map":{"version":3,"sources":["/home/robin/Desktop/robin/econ/shopbackend/shopfrontend/src/components/Screens/UserListScreen.js"],"names":["React","useEffect","LinkContainer","Table","Button","Loader","Message","useDispatch","useSelector","listUsers","deleteUser","UserListScreen","history","dispatch","userList","state","loading","error","users","userLogin","userInfo","userDelete","successDelete","success","isAdmin","push","deleteHandler","id","window","confirm","map","user","_id","name","email","color"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport { Table, Button } from \"react-bootstrap\";\nimport { Loader } from \"../Loader\";\nimport Message from \"../Message\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { listUsers,deleteUser } from \"../../actions/userActions\";\n\nconst UserListScreen = ({history}) => {\n  const dispatch = useDispatch();\n  const userList = useSelector((state) => state.userList);\n  const { loading, error, users } = userList;\n\n  const userLogin = useSelector((state) => state.userLogin);\n  const { userInfo } = userLogin;\n\n  const userDelete = useSelector((state) => state.userDelete);\n  const { success:successDelete } = userDelete;\n\n  useEffect(() => {\n    if(userInfo && userInfo.isAdmin){\n        dispatch(listUsers());\n    }else{\n        history.push('/login') \n    }\n    \n  }, [dispatch,history,successDelete,userInfo ]);\n  \n\n  const deleteHandler =(id)=>{\n      if(window.confirm('Are you sure you want to delete this user')){\n        dispatch(deleteUser(id))\n      }\n      \n  }\n\n  return (\n    <div>\n      <h1>users</h1>\n      {loading ? (\n        <Loader />\n      ) : error ? (\n        <Message variant=\"danger\">{error}</Message>\n      ) : (\n        <Table stripped bordered hover responsive className='table-sm'>\n           <thead>\n               <tr>\n               <th>ID</th>\n               <th>NAME</th>\n               <th>EMAIL</th>\n               <th>ADMIN</th>\n               <th></th>\n               </tr>\n               </thead>\n               <tbody>\n                   {users.map(user => (\n                       <tr key={user._id}>\n                       <td>{user._id}</td>    \n                       <td>{user.name}</td>\n                       <td>{user.email}</td>\n                       <td>{user.isAdmin ? (<i\n                       className='fas fa-check' style={{color:'green'}}>\n                           \n                       </i>) :(\n                           <i\n                           className='fas fa-check' style={{color:'red'}}>\n                               \n                           </i>\n                       )}</td>\n                  \n                       <td>\n                           <LinkContainer to={`/admin/user/${user._id}/edit`}>\n                               <Button variant='light' className='btn-sm'><i\n                           className='fas fa-edit'>\n                               \n                           </i>Edit</Button>\n                           </LinkContainer>\n\n                           <Button variant='danger' className='btn-sm' onClick={()=>deleteHandler(user._id)}><i\n                           className='fas fa-trash'>\n                               \n                           </i>Delete</Button>\n                       </td>\n\n                       </tr>\n                       \n                   ))}\n               </tbody>\n          \n        </Table>\n      )}\n    </div>\n  );\n};\n\nexport default UserListScreen;\n"]},"metadata":{},"sourceType":"module"}